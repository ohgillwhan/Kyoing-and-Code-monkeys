# 상속 보다는 컴포지션을 사용하라

## 핵심정리

상속은 강력하지만, 캡슐화를 해친다는 문제가 있다

```
상속을 하는 순간 상위클래스의 캡슐화는 해쳐질수도있다. 예로 나오는게 성능향상을 위한 HashSet 재정의에서 addAll 성능을 향상시키기 위해서 튜닝을 실시했지만, addAll이 add를 이용해서 구현되어있다는 사실에 대해서 HashSet 내부를 보는게 아닌 이상에야 모른다. 그래서 addAll을 했더니 두배로 들어갈수가 있는 그런 웃기는 상황이 벌어질수도있는것이다.
```

<br>

## 생각정리

```
SOLID중에 리스코프치환의 법칙 (LSP)에 어긋나는 것이라는 생각이 든다.
자... 그럼 상속을 하지않고 컴포지션(구성)을 이용하면 어떻게 되는가?
그전에 컴포지션이라는 말에 대해서 어떤건지 조금생각할 필요성이 있어보인다..

컴포지션이란 strategy pattern을 보면 쉽게 알 수 있다.
위에서 들었던 예를 들면 HashSet을 상속할게 아니라 HashSet을 하나의 구성요소로 보고
입맛에 따라 필요한 메소드를 바꿔주는 형식으로 이용한다면, 예상치못하게 되는 결과는 초래되지 않을 수 있다. 결국 상속이라는것은 그만큼 끈끈하다는 이야기 인거같다. 그래서 IS-A 관계가 아니면 쓰지 않아야 한다는 것이기도 하고 말이다.

상속하기 전에 한 번씩 생각해보는것이 좋을 것같다.
정말로 하위클래스가 상위클래스를 대체할수있나? 하고 말이다.
```
